# Point-Cloud-Preprocessing
点云离群点剔除与去噪常用传统方法与深度学习方法
## 统计滤波
### 核心思想
统计滤波基于一个简单的假设：正常数据点与其邻近点之间的距离符合高斯分布，而离群点则不符合这种分布。
也就是说，在一个密集的点云中，大部分点周围的点密度是相似的。如果一个点周围很“空旷”，或者异常“拥挤”，那它就很可能是噪声。统计滤波主要处理的是因为“空旷”而被判定的离群点。
### 算法原理与步骤
统计滤波的处理过程主要分为以下三步：
1. 对于点云中的每一个点$$P_i$$:
  - 计算它到其所有k个最近邻点的距离
  - 计算这些距离的平均值$$\mu_i$$和标准差$$\sigma_i$$
  - 平均距离$$\mu_i$$代表了点$$P_i$$邻域的密度
2. 计算全局阈值：
  - 假设所有点的平均距离$$\{\mu_1,\mu_2,...,\mu_n\}$$服从一个高斯分布（正态分布），计算整个点云所有的均值$$\mu$$和标准差$$\sigma$$
  - 设定一个阈值区间：$$\mu-\alpha \cdot \sigma$$，$$\mu+\alpha \cdot \sigma$$
$$\alpha$$是一个标准偏差乘数，其决定了“宽容度”。$$\alpha$$越小，被移除的点越多。
3. 滤波判断
  - 遍历每个点，如果该点的平均距离不在上述阈值区间内，即被视为离群点并被移除
### 参数选择
1. K（最近邻点的数量）
  - 值太小：无法准确估计局部密度，可能将一些有效点（如角点、边缘点）误判为噪声
  - 值太大：过度平滑，可能无法检测出小规模的噪声团，并且计算量会显著增加
2. $$\alpha$$（标准偏差乘数）
  - 值太小：阈值区间变窄，会移除更多的点，包括一些有效点
  - 值太大：阈值区间变宽，会保留更多的噪声点
## 半径滤波
### 核心思想
半径滤波基于一个非常直观的假设：正常数据点在其周围一定半径内应该有足够多的邻居点，而离群点则相对孤立。
如果一个点在其给定半径的球体内找不到足够多的“伙伴”，它就被认为是离群点并被移除。
### 算法原理与步骤
半径滤波的处理过程较为简单：
1. 对于点云中的每一个点$$P_i$$：
  - 以该点为中心，设定一个搜索半径$$r$$
  - 统计在这个半径为的球体内的邻点数量$$N_i$$
2. 设定阈值判断：
  - 设定一个最小邻居点数阈值$$N_{min}$$
  - 如果点的邻点数量$$N_i$$小于$$N_{min}$$，即$$N_i<N_{min}$$，则该点被判定为离群点并被移除
### 参数选择
1. $$r$$（搜索半径）
  - 值太小：可能无法包含足够多的邻居，导致将一些有效点（尤其是在稀疏区域）误判为噪声
  - 值太大：可能使一些真正的离群点因为偶然包含了远处的点而被保留（误判）
2. $$N_{min}$$（最小邻居点数）
  - 值太小：过滤不够严格，会保留较多的噪声点
  - 值太大：过滤过于严格，会移除较多的有效点
## 体素网格滤波
### 核心思想
体素网格滤波的核心思想是下采样，但它不是简单的随机采样，而是通过将3D空间划分为规则的网格（体素），然后用每个体素内所有点的某种代表（如重心）来替代该体素内的所有点，从而实现在保持点云整体形状的同时，显著减少点的数量。
### 算法原理与步骤
1. 创建体素网格：
  - 将点云所在的3D空间划分为一个边长为voxel_size的立方体网格，每个立方体称为一个体素
2. 分配点到体素：
  - 将每个点分配到它所属的体素中
3. 体素内采样：
  - 对于每个非空体素，用一个点来代表该体素内的所有点。常用的代表点计算方法有：
    - 重心：计算体素内所有点的几何中心（平均值）
    - 中心点：直接使用体素的几何中心点
4. 生成新点云
  - 将所有体素的代表点集合起来，形成下采样后的新点云
### 参数选择
1. voxel_size（体素尺寸）：
  - 值太小：下采样效果不明显，点数减少不多，但计算量大
  - 值太大：会过度简化点云，丢失重要细节，可能导致形状失真
## 高斯滤波
### 核心思想
高斯滤波的核心思想源于图像处理，是一种加权平均滤波。它通过对每个点及其邻域内的点进行加权平均来平滑数据，其中权重遵循高斯分布（正态分布）。离中心点越近的点权重越大，越远的点权重越小。
其主要目的不是去除离群点，而是平滑点云表面，减少噪声，同时尽可能保持特征。
### 算法原理与步骤
1. 对于点云中的每一个点$$P_i$$
  - 找到它的k个最近邻点或在指定半径内的所有邻点
2. 计算加权重心
  - 使用高斯函数计算每个邻点$$P_j$$的权重$$w_j=exp(-\frac{||P_i-P_j||^2}{2\sigma^2})$$
  - 其中，$$\sigma$$是高斯函数的标准差，控制着权重衰减的速度
  - 计算该点的新位置（加权平均）：$$P_i^{new}=\frac{\sum_{j=1}^kw_j\cdot P_j}{\sum_{j=1}^kw_j}$$
3. 更新点位置
  - 将所有点移动到它们新的加权平均位置
### 参数选择
算法的效果主要由两个参数决定：
1. $$\sigma$$（高斯标准差）
  - 值太小：只有非常近的点有显著权重，平滑效果弱
  - 值太大：较远的点也有较大权重，可能导致过度平滑，丢失细节
2. 邻域大小
